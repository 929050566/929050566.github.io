<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">


<meta name="baidu-site-verification" content="mrSaJ4uJ8z">
<meta name="baidu-site-verification" content="owvyVcpZUx">
<meta name="google-site-verification" content="oy_lPgdf5gdUpaAESj7zkW7PjVrWce205YLBq4hgA5w">
<meta name="google-site-verification" content="iTtZMlLeGbbsRl-GNQFoHAhSbTfdSN_ZNfBotJgueV0">

<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
  <style>
      .pace .pace-progress {
          background: #1E92FB; /*进度条颜色*/
          height: 3px;
      }
      .pace .pace-progress-inner {
           box-shadow: 0 0 10px #1E92FB, 0 0 5px     #1E92FB; /*阴影颜色*/
      }
      .pace .pace-activity {
          border-top-color: #1E92FB;    /*上边框颜色*/
          border-left-color: #1E92FB;    /*左边框颜色*/
      }
  </style>










<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">



  <meta name="google-site-verification" content="true">














  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/favicon.ico?v=5.1.4" color="#222">





  <meta name="keywords" content="MyBatis,">










<meta name="description" content="MyBatis是什么&amp;emsp;MyBatis 是支持普通 SQL 查询，存储过程和高级映射的优秀持久层框架，它是一个轻量级ORM应用框架。MyBatis使用简单的XML或注解用于配置和原始映射，将接口和java的POJOs(普通的java对象)映射成数据中的记录。它保留了SQL语句并且使SQL语句和应用程序分离。&amp;emsp;MyBatis是一个半自动的框架，之所以称它为半自动，是用为它需要手动配">
<meta name="keywords" content="MyBatis">
<meta property="og:type" content="article">
<meta property="og:title" content="MyBatis">
<meta property="og:url" content="https://a929050566.coding.me/2018/12/06/MyBatis/index.html">
<meta property="og:site_name" content="个人博客">
<meta property="og:description" content="MyBatis是什么&amp;emsp;MyBatis 是支持普通 SQL 查询，存储过程和高级映射的优秀持久层框架，它是一个轻量级ORM应用框架。MyBatis使用简单的XML或注解用于配置和原始映射，将接口和java的POJOs(普通的java对象)映射成数据中的记录。它保留了SQL语句并且使SQL语句和应用程序分离。&amp;emsp;MyBatis是一个半自动的框架，之所以称它为半自动，是用为它需要手动配">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-12-14T12:30:17.853Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MyBatis">
<meta name="twitter:description" content="MyBatis是什么&amp;emsp;MyBatis 是支持普通 SQL 查询，存储过程和高级映射的优秀持久层框架，它是一个轻量级ORM应用框架。MyBatis使用简单的XML或注解用于配置和原始映射，将接口和java的POJOs(普通的java对象)映射成数据中的记录。它保留了SQL语句并且使SQL语句和应用程序分离。&amp;emsp;MyBatis是一个半自动的框架，之所以称它为半自动，是用为它需要手动配">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://a929050566.coding.me/2018/12/06/MyBatis/">





  <title>MyBatis | 个人博客</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">个人博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">张豪</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-简历">
          <a href="/resume/index.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            简历
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://a929050566.coding.me/2018/12/06/MyBatis/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="张豪">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar2.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">MyBatis</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-06T10:55:20+08:00">
                2018-12-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/框架/" itemprop="url" rel="index">
                    <span itemprop="name">框架</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/12/06/MyBatis/" class="leancloud_visitors" data-flag-title="MyBatis">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  4,158字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  19分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="MyBatis是什么"><a href="#MyBatis是什么" class="headerlink" title="MyBatis是什么"></a>MyBatis是什么</h1><p>&emsp;MyBatis 是支持普通 SQL 查询，存储过程和高级映射的优秀持久层框架，它是一个轻量级ORM应用框架。MyBatis使用简单的XML或注解用于配置和原始映射，将接口和java的POJOs(普通的java对象)映射成数据中的记录。它保留了SQL语句并且使SQL语句和应用程序分离。<br>&emsp;MyBatis是一个半自动的框架，之所以称它为半自动，是用为它需要手动配置POJO,SQL和映射关系，不像Hibernate只需要提供POJO和映射关系即可。<br>&emsp;Mybatis需要提供的映射文件包含了一下三个部分：sql，映射规则，pojo。在Mybatis里面你需要自己编写sql，虽然比Hibernate配置多，但是Mybatis可以配置动态sql，解决了hibernate表名根据时间变化，不同条件下不一样的问题，同时你也可以对sql进行优化，通过配置决定你的sql映射规则，也能支持存储过程，所以对于一些复杂和需要优化性能的sql查询它就更加方便。Mybatis几乎可以做到jdbc所有能做到的事情。</p>
<h1 id="MyBatis什么时候使用"><a href="#MyBatis什么时候使用" class="headerlink" title="MyBatis什么时候使用"></a>MyBatis什么时候使用</h1><p>&emsp;MyBaties的SQL语句是由你编写的，所以Mybaties更有利于SQL的优化。如果项目的数据量比较大，并且效率要求比较高，则建议使用MyBatis框架。</p>
<h1 id="Mybatis如何使用"><a href="#Mybatis如何使用" class="headerlink" title="Mybatis如何使用"></a>Mybatis如何使用</h1><h2 id="导入jar包"><a href="#导入jar包" class="headerlink" title="导入jar包"></a>导入jar包</h2><p>&emsp;运用框架首先不必多说的就是要先导入框架所依赖jar包，<a href="http://www.mybatis.org/" target="_blank" rel="noopener">点击链接下载mybatis的jar包</a>。以为是数据持久层框架所以还需导入访问数据库所依赖的jar包。比如<a href="https://dev.mysql.com" target="_blank" rel="noopener">mysql.jar</a>。</p>
<h2 id="创建数据库对象"><a href="#创建数据库对象" class="headerlink" title="创建数据库对象"></a>创建数据库对象</h2><p>&emsp;建立关系型映射之前，我们先需要建立表。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `students` (</span><br><span class="line">  `student_id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `student_name` varchar(20) NOT NULL,</span><br><span class="line">  `student_sex` char(1) DEFAULT NULL,</span><br><span class="line">  `student_birthday` date DEFAULT NULL,</span><br><span class="line">  `group_id` varchar(20) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`student_id`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8;</span><br></pre></td></tr></table></figure></p>
<h2 id="建立POJO"><a href="#建立POJO" class="headerlink" title="建立POJO"></a>建立POJO</h2><p>&emsp;建立对象关系型映射之前，当然对象是必不可少的。需要注意的是，写对象属性的时候，属性名中不可以有下划线。并且最好用引用类型，不要用基本数据类型，这样可以提高代码效率。(因为代码比较简单，就不做注释了。)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * @author haozai</span><br><span class="line"> * @date 2018年12月5日  </span><br><span class="line"> */</span><br><span class="line">package com.aowin.testmybatis.student.pojo;</span><br><span class="line"></span><br><span class="line">import java.io.Serializable;</span><br><span class="line">import java.sql.Date;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 学生基本信息</span><br><span class="line"> * @author haozai</span><br><span class="line"> * @date 2018年12月5日 上午9:40:49</span><br><span class="line"> */</span><br><span class="line">public class Students implements Serializable &#123;</span><br><span class="line"></span><br><span class="line">	private Integer studentid;</span><br><span class="line">	private String studentname;</span><br><span class="line">	private String studentsex;</span><br><span class="line">	private Date studentbirthday;</span><br><span class="line">	private String groupid;</span><br><span class="line"></span><br><span class="line">	public Students() &#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public int getStudentid() &#123;</span><br><span class="line">		return studentid;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setStudentid(Integer studentid) &#123;</span><br><span class="line">		this.studentid = studentid;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public String getStudentname() &#123;</span><br><span class="line">		return studentname;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setStudentname(String studentname) &#123;</span><br><span class="line">		this.studentname = studentname;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public String getStudentsex() &#123;</span><br><span class="line">		return studentsex;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setStudentsex(String studentsex) &#123;</span><br><span class="line">		this.studentsex = studentsex;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public Date getStudentbirthday() &#123;</span><br><span class="line">		return studentbirthday;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setStudentbirthday(Date studentbirthday) &#123;</span><br><span class="line">		this.studentbirthday = studentbirthday;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public String getGroupid() &#123;</span><br><span class="line">		return groupid;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setGroupid(String groupid) &#123;</span><br><span class="line">		this.groupid = groupid;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public String toString() &#123;</span><br><span class="line">		return &quot;Students [studentid=&quot; + studentid + &quot;, studentname=&quot; + studentname + &quot;, studentsex=&quot; + studentsex</span><br><span class="line">				+ &quot;, studentbirthday=&quot; + studentbirthday + &quot;, groupid=&quot; + groupid + &quot;]&quot;;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="创建映射文件"><a href="#创建映射文件" class="headerlink" title="创建映射文件"></a>创建映射文件</h2><p>&emsp;在POJO同目录下创建一个和POJO名相同的xml文件——Students.xml,写映射文件前，需要先导入DTD约束。(因为篇幅比较大，这里我们只介绍DML语句，DQL语句的介绍请<a href="https://929050566.github.io/2018/12/07/MyBatis之DQL/" target="_blank" rel="noopener">点击这里</a>)</p>
<h3 id="DML"><a href="#DML" class="headerlink" title="DML"></a>DML</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;   </span><br><span class="line">&lt;!DOCTYPE mapper   </span><br><span class="line">PUBLIC &quot;-//ibatis.apache.org//DTD Mapper 3.0//EN&quot;  </span><br><span class="line">&quot;http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd&quot;&gt; </span><br><span class="line"> </span><br><span class="line">&lt;!-- mapper 为根元素节点， 一个namespace对应一个dao --&gt;</span><br><span class="line">&lt;mapper namespace=&quot;com.aowin.testmybatis.student.pojo.Students&quot;&gt;</span><br><span class="line"> </span><br><span class="line">    &lt;insert</span><br><span class="line">      &lt;!-- 1. id （必须配置）</span><br><span class="line">        id是命名空间中的唯一标识符，可被用来代表这条语句。 </span><br><span class="line">        一个命名空间（namespace） 对应一个dao接口, </span><br><span class="line">        这个id也应该对应dao里面的某个方法（相当于方法的实现），因此id 应该与方法名一致 --&gt;</span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line">      &lt;!-- 2. parameterType （可选配置, 默认为mybatis自动选择处理）</span><br><span class="line">        将要传入语句的参数的完全限定类名或别名， 如果不配置，mybatis会通过ParameterHandler 根据参数类型默认选择合适的typeHandler进行处理</span><br><span class="line">        parameterType 主要指定参数类型，可以是int, short, long, string等类型，也可以是复杂类型（如对象） --&gt;</span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line">      &lt;!-- 3. flushCache （可选配置，默认配置为true）</span><br><span class="line">        将其设置为 true，任何时候只要语句被调用，都会导致本地缓存和二级缓存都会被清空，默认值：true（对应插入、更新和删除语句） --&gt;</span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line">      &lt;!-- 4. statementType （可选配置，默认配置为PREPARED）</span><br><span class="line">        STATEMENT，PREPARED 或 CALLABLE 的一个。这会让 MyBatis 分别使用 Statement，PreparedStatement 或 CallableStatement，默认值：PREPARED。 --&gt;</span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line">      &lt;!-- 5. keyProperty (可选配置， 默认为unset)</span><br><span class="line">        （仅对 insert 和 update 有用）唯一标记一个属性，MyBatis 会通过 getGeneratedKeys 的返回值或者通过 insert 语句的 selectKey 子元素设置它的键值，默认：unset。如果希望得到多个生成的列，也可以是逗号分隔的属性名称列表。 --&gt;</span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line">      &lt;!-- 6. keyColumn     (可选配置)</span><br><span class="line">        （仅对 insert 和 update 有用）通过生成的键值设置表中的列名，这个设置仅在某些数据库（像 PostgreSQL）是必须的，当主键列不是表中的第一列的时候需要设置。如果希望得到多个生成的列，也可以是逗号分隔的属性名称列表。 --&gt;</span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line">      &lt;!-- 7. useGeneratedKeys (可选配置， 默认为false)</span><br><span class="line">        （仅对 insert 和 update 有用）这会令 MyBatis 使用 JDBC 的 getGeneratedKeys 方法来取出由数据库内部生成的主键（比如：像 MySQL 和 SQL Server 这样的关系数据库管理系统的自动递增字段），默认值：false。  --&gt;</span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line">      &lt;!-- 8. timeout  (可选配置， 默认为unset, 依赖驱动)</span><br><span class="line">        这个设置是在抛出异常之前，驱动程序等待数据库返回请求结果的秒数。默认值为 unset（依赖驱动）。 --&gt;</span><br><span class="line">     &gt;</span><br><span class="line"> </span><br><span class="line">    &lt;update&gt;</span><br><span class="line"> </span><br><span class="line">    &lt;delete&gt;</span><br><span class="line">	&lt;!--update和delete标签和insert标签相似,有着相同的属性--&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
<p>&emsp;上面的代码只是简单的介绍了一下子标签的属性。真正使用的时候，还需要编写自己所需要的SQL语句。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper </span><br><span class="line">	PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span><br><span class="line">	&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;mapper  namespace=&quot;com.aowin.testmybatis.student.pojo.Students&quot; &gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 添加学生信息的执行语句 --&gt;</span><br><span class="line">	&lt;insert id=&quot;insertstudent&quot; parameterType=&quot;com.aowin.testmybatis.student.pojo.Students&quot; </span><br><span class="line">		useGeneratedKeys=&quot;true&quot; keyProperty=&quot;studentid&quot;&gt;</span><br><span class="line">		&lt;!-- userGeneratedKeys:启动主键 keyProperty:主键属性 --&gt;</span><br><span class="line">		&lt;![CDATA[</span><br><span class="line">		insert into students (student_name,student_sex,student_birthday,group_id)</span><br><span class="line">		values(#&#123;studentname&#125;,#&#123;studentsex&#125;,#&#123;studentbirthday&#125;,#&#123;groupid&#125;)</span><br><span class="line">		]]&gt;</span><br><span class="line">	&lt;/insert&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 修改学生信息 --&gt;</span><br><span class="line">	&lt;update id=&quot;updatestudent&quot; parameterType=&quot;com.aowin.testmybatis.student.pojo.Students&quot;&gt;</span><br><span class="line">		update students set student_name=#&#123;studentname&#125;,student_sex=#&#123;studentsex&#125;</span><br><span class="line">		,student_birthday=#&#123;studentbirthday&#125;,group_id=#&#123;groupid&#125;</span><br><span class="line">		where student_id=#&#123;studentid&#125;</span><br><span class="line">	&lt;/update&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 删除学生信息 --&gt;</span><br><span class="line">	&lt;delete id=&quot;deletestudent&quot; parameterType=&quot;int&quot;&gt;</span><br><span class="line">		delete from students</span><br><span class="line">		where student_id=#&#123;studentid&#125;</span><br><span class="line">	&lt;/delete&gt;</span><br><span class="line"></span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure></p>
<p>其中将SQL语句用&lt;![CDATA[]]&gt;标签包裹，是为了防止它自己转义（如：&gt;,&lt;等）。在这里也可以编写对应的实体！<br>这里的parameterType设置成com.aowin.testmybatis.student.pojo.Students。不过，建议大家还是使用typeAlias进行配置吧。唯一需要说明的就是<insert>元素里面的useGeneratedKeys和keyProperties属性，这两个属性是用来获取数据库中的主键的。<br>在数据库里面经常性的会给数据库表设置一个自增长的列作为主键，如果我们操作数据库后希望能够获取这个主键该怎么弄呢？正如上面所述，如果是支持自增长的数据库，如mysql数据库，那么只需要设置useGeneratedKeys和keyProperties属性便可以了，但是对于不支持自增长的数据库（如oracle）该怎么办呢？<br>mybatis里面在<insert>元素下面提供了<selectkey>子元素用于帮助解决这个问题。来看下配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;selectKey</span><br><span class="line">        &lt;!-- selectKey 语句结果应该被设置的目标属性。如果希望得到多个生成的列，也可以是逗号分隔的属性名称列表。 --&gt;</span><br><span class="line">        keyProperty=&quot;id&quot;</span><br><span class="line">        &lt;!-- 结果的类型。MyBatis 通常可以推算出来，但是为了更加确定写上也不会有什么问题。MyBatis 允许任何简单类型用作主键的类型，包括字符串。如果希望作用于多个生成的列，则可以使用一个包含期望属性的 Object 或一个 Map。 --&gt;</span><br><span class="line">        resultType=&quot;int&quot;</span><br><span class="line">        &lt;!-- 这可以被设置为 BEFORE 或 AFTER。如果设置为 BEFORE，那么它会首先选择主键，设置 keyProperty 然后执行插入语句。如果设置为 AFTER，那么先执行插入语句，然后是 selectKey 元素 - 这和像 Oracle 的数据库相似，在插入语句内部可能有嵌入索引调用。 --&gt;</span><br><span class="line">        order=&quot;BEFORE&quot;</span><br><span class="line">        &lt;!-- 与前面相同，MyBatis 支持 STATEMENT，PREPARED 和 CALLABLE 语句的映射类型，分别代表 PreparedStatement 和 CallableStatement 类型。 --&gt;</span><br><span class="line">        statementType=&quot;PREPARED&quot;&gt;</span><br><span class="line">&lt;/selectKey&gt;</span><br></pre></td></tr></table></figure></selectkey></insert></insert></p>
<p>针对不能使用自增长特性的数据库，可以使用下面的配置来实现相同的功能：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;insert id=&quot;insertUser&quot; parameterType=&quot;com.dy.entity.User&quot;&gt;</span><br><span class="line">    &lt;!-- oracle等不支持id自增长的，可根据其id生成策略，先获取id --&gt;</span><br><span class="line">       </span><br><span class="line">    &lt;selectKey resultType=&quot;int&quot; order=&quot;BEFORE&quot; keyProperty=&quot;id&quot;&gt;</span><br><span class="line">          select seq_user_id.nextval as id from dual</span><br><span class="line">    &lt;/selectKey&gt;</span><br><span class="line">  insert into students (student_id,student_name,student_sex,student_birthday,group_id)</span><br><span class="line">		values(#&#123;id&#125;,#&#123;studentname&#125;,#&#123;studentsex&#125;,#&#123;studentbirthday&#125;,#&#123;groupid&#125;)</span><br><span class="line">   &lt;/insert&gt;</span><br></pre></td></tr></table></figure></p>
<p>接下来我们讲讲查询语句！  </p>
<h3 id="动态SQL"><a href="#动态SQL" class="headerlink" title="动态SQL"></a>动态SQL</h3><p>写完DML语句，可能很多人就会想到假如我同时要插入多条信息，或者删除多条信息，该怎么写SQL语句呢？别慌，该是动态SQL登场的时候了！<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper </span><br><span class="line">	PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span><br><span class="line">	&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;mapper  namespace=&quot;com.aowin.testmybatis.student.pojo.Students&quot; &gt;</span><br><span class="line">	&lt;!-- 动态SQL --&gt;</span><br><span class="line">	&lt;update id=&quot;updatestudentdy&quot; parameterType=&quot;com.aowin.testmybatis.student.pojo.Students&quot;&gt;</span><br><span class="line">		update students </span><br><span class="line">		&lt;set&gt;</span><br><span class="line">			&lt;if test=&quot;studentname!=null and studentname!=&apos;&apos;&quot;&gt;</span><br><span class="line">				student_name=#&#123;studentname&#125;,</span><br><span class="line">			&lt;/if&gt;</span><br><span class="line">			&lt;if test=&quot;studentsex!=null and studentsex!=&apos;&apos;&quot;&gt;</span><br><span class="line">				student_sex=#&#123;studentsex&#125;,</span><br><span class="line">			&lt;/if&gt;</span><br><span class="line">			&lt;if test=&quot;studentbirthday!=null&quot;&gt;</span><br><span class="line">				student_birthday=#&#123;studentbirthday&#125;,</span><br><span class="line">			&lt;/if&gt;</span><br><span class="line">			&lt;if test=&quot;groupid!=null and groupid!=&apos;&apos;&quot;&gt;</span><br><span class="line">				group_id=#&#123;groupid&#125;</span><br><span class="line">			&lt;/if&gt;			</span><br><span class="line">		&lt;/set&gt;</span><br><span class="line">		&lt;where&gt;</span><br><span class="line">			student_id=#&#123;studentid&#125;</span><br><span class="line">		&lt;/where&gt;</span><br><span class="line">	&lt;/update&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;update id=&quot;updatestudentdy2&quot; parameterType=&quot;com.aowin.testmybatis.student.pojo.Students&quot;&gt;</span><br><span class="line">		update students</span><br><span class="line">		&lt;trim prefix=&quot;set&quot; suffix=&quot;where student_id=#&#123;studnetid&#125;&quot; suffixOverrides=&quot;,&quot;&gt;</span><br><span class="line">			&lt;if test=&quot;studentname!=null and studentname!=&apos;&apos;&quot;&gt;</span><br><span class="line">				student_name=#&#123;studentname&#125;,</span><br><span class="line">			&lt;/if&gt;</span><br><span class="line">			&lt;if test=&quot;studentsex!=null and studentsex!=&apos;&apos;&quot;&gt;</span><br><span class="line">				student_sex=#&#123;studentsex&#125;,</span><br><span class="line">			&lt;/if&gt;</span><br><span class="line">			&lt;if test=&quot;studentbirthday!=null&quot;&gt;</span><br><span class="line">				student_birthday=#&#123;studentbirthday&#125;,</span><br><span class="line">			&lt;/if&gt;</span><br><span class="line">			&lt;if test=&quot;groupid!=null and groupid!=&apos;&apos;&quot;&gt;</span><br><span class="line">				group_id=#&#123;groupid&#125;</span><br><span class="line">			&lt;/if&gt;			</span><br><span class="line">		&lt;/trim&gt;</span><br><span class="line">	&lt;/update&gt;</span><br><span class="line">		</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure></p>
<p>这个自己拼接sql语句有些类似，在这里我们介绍一下几个标签：if，choose (when, otherwise)，trim (where, set)，foreach。<br><strong>if</strong>:if标签一般用于非空验证，如上例，若id为空，if标签里的代码，将不会执行，反之，则会执行。<br><strong>choose(when,otherwise)</strong>:相当于switch(case,default) ，如上例，若title 为空，when标签里的代码，将不会执行，默认执行otherwise标签里面的代码。<br><strong>trim (prefix, suffix,prefixoverride)</strong>:</p>
<ul>
<li>prefix:前缀</li>
<li>suffix:后缀</li>
<li>prefixoverride=“AND|OR”：去掉最前面的and或者or;</li>
<li>suffixoverride=“AND|OR”：去掉最后面的and或者or;</li>
</ul>
<h3 id="批量处理"><a href="#批量处理" class="headerlink" title="批量处理"></a>批量处理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper </span><br><span class="line">	PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span><br><span class="line">	&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;mapper  namespace=&quot;com.aowin.testmybatis.student.pojo.Students&quot; &gt;</span><br><span class="line">	&lt;!-- 批量处理添加，传进来的是List --&gt;	</span><br><span class="line">	&lt;insert id=&quot;insertstudents&quot; useGeneratedKeys=&quot;true&quot; keyProperty=&quot;studentid&quot;&gt;</span><br><span class="line">		insert into students (student_name,student_sex,student_birthday,group_id) values</span><br><span class="line">		&lt;foreach collection=&quot;list&quot; item=&quot;item&quot; separator=&quot;,&quot;&gt;</span><br><span class="line">			(#&#123;item.studentname&#125;,#&#123;item.studentsex&#125;,#&#123;item.studentbirthday&#125;,#&#123;item.groupid&#125;)			</span><br><span class="line">		&lt;/foreach&gt;</span><br><span class="line">	&lt;/insert&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 批量删除 传进来的是list集合--&gt;</span><br><span class="line">	&lt;delete id=&quot;deletestudents&quot; &gt;</span><br><span class="line">		delete from students where student_id in</span><br><span class="line">		&lt;foreach collection=&quot;list&quot; item=&quot;item&quot; open=&quot;(&quot; close=&quot;)&quot; separator=&quot;,&quot;&gt;</span><br><span class="line">			#&#123;item&#125;</span><br><span class="line">		&lt;/foreach&gt;</span><br><span class="line">	&lt;/delete&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 批量删除 传进来的是数组--&gt;</span><br><span class="line">	&lt;delete id=&quot;deletestudents2&quot;&gt;</span><br><span class="line">		delete from students where student_id in</span><br><span class="line">		&lt;foreach collection=&quot;array&quot; item=&quot;item&quot; open=&quot;(&quot; close=&quot;)&quot; separator=&quot;,&quot;&gt;</span><br><span class="line">			#&#123;item&#125;</span><br><span class="line">		&lt;/foreach&gt;</span><br><span class="line">	&lt;/delete&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
<p>这里我们需要介绍一下foreach标签：<br><strong>foreach</strong>:可迭代任何对象（如列表、集合等）和任何的字典或者数组对象传递给foreach作为集合参数，当使用可迭代对象或者数组时，index是当前迭代的次数，item的值是本次迭代获取的元素。当使用字典（或者Map.Entry对象的集合）时，index是键，item是值。  </p>
<ul>
<li>foreach元素的属性主要有 item，index，collection，open，separator，close。</li>
<li>collection标签可以填（’list’,’array’,’map’）。  </li>
<li>item表示集合中每一个元素进行迭代时的别名；</li>
<li>index指 定一个名字，用于表示在迭代过程中，每次迭代到的位置；</li>
<li>open表示该语句以什么开始，</li>
<li>separator表示在每次进行迭代之间以什么符号作为分隔符；</li>
<li>close表示以什么结束。<br>当有了动态的SQL之后，我们有时间还可能会做批量修改和批量添加的操作。  </li>
</ul>
<h2 id="创建配置文件"><a href="#创建配置文件" class="headerlink" title="创建配置文件"></a>创建配置文件</h2><p>所有的配置文件建议都放在resource目录下！</p>
<h3 id="创建DB配置文件"><a href="#创建DB配置文件" class="headerlink" title="创建DB配置文件"></a>创建DB配置文件</h3><p>因为要访问数据库需要配置数据库连接的基本信息，我们这里以mysql为例<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">driver=com.mysql.jdbc.Driver</span><br><span class="line">url=jdbc:mysql://localhost:3306/testmybatis?useUnicode=true&amp;characterEncoding=utf8</span><br><span class="line">username=root</span><br><span class="line">password=123</span><br></pre></td></tr></table></figure></p>
<h3 id="创建mybatisconfig-xml"><a href="#创建mybatisconfig-xml" class="headerlink" title="创建mybatisconfig.xml"></a>创建mybatisconfig.xml</h3><p>配置文件主要分四块:</p>
<ul>
<li>添加数据库、日志配置文件</li>
<li>类型别名设定</li>
<li>搭建数据库连接池</li>
<li>加载映射文件  </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE configuration</span><br><span class="line">	PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span><br><span class="line">	&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">	&lt;!-- 获取数据库连接基本信息,添加数据库配置文件的路径 --&gt;</span><br><span class="line">	&lt;properties resource=&quot;database.properties&quot;&gt;&lt;/properties&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- pojo的类型进行别名设置 --&gt;</span><br><span class="line">    &lt;typeAliases&gt;</span><br><span class="line">        &lt;typeAlias type=&quot;com.aowin.testmybatis.student.pojo.Students&quot; alias=&quot;Students&quot;/&gt;</span><br><span class="line">    &lt;/typeAliases&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 搭建数据库连接池 --&gt;</span><br><span class="line">	&lt;environments default=&quot;mysql&quot;&gt;</span><br><span class="line">		&lt;environment id=&quot;mysql&quot;&gt;&lt;!-- 数据库类型 --&gt;</span><br><span class="line">			&lt;transactionManager type=&quot;JDBC&quot; /&gt;&lt;!-- 事务驱动，一般固定是JDBC --&gt;</span><br><span class="line">			&lt;dataSource type=&quot;POOLED&quot;&gt;&lt;!-- 连接池 --&gt;</span><br><span class="line">				&lt;property name=&quot;driver&quot; value=&quot;$&#123;driver&#125;&quot; /&gt;</span><br><span class="line">				&lt;property name=&quot;url&quot; value=&quot;$&#123;url&#125;&quot; /&gt;</span><br><span class="line">				&lt;property name=&quot;username&quot; value=&quot;$&#123;username&#125;&quot; /&gt;</span><br><span class="line">				&lt;property name=&quot;password&quot; value=&quot;$&#123;password&#125;&quot; /&gt;</span><br><span class="line">				&lt;!-- 配置最大连接数 --&gt;</span><br><span class="line">				&lt;property name=&quot;poolMaximumActiveConnections&quot; value=&quot;80&quot; /&gt;</span><br><span class="line">				&lt;!-- 配置核心连接数 --&gt;</span><br><span class="line">				&lt;property name=&quot;poolMaximumIdleConnections&quot; value=&quot;20&quot; /&gt;</span><br><span class="line">			&lt;/dataSource&gt;</span><br><span class="line">		&lt;/environment&gt;</span><br><span class="line">	&lt;/environments&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 加载映射文件 --&gt;</span><br><span class="line">	&lt;mappers&gt;</span><br><span class="line">		&lt;mapper resource=&quot;com/aowin/testmybatis/student/pojo/Students.xml&quot;&gt;&lt;/mapper&gt;</span><br><span class="line">	&lt;/mappers&gt;</span><br><span class="line">	</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
<h2 id="DAO层的编写"><a href="#DAO层的编写" class="headerlink" title="DAO层的编写"></a>DAO层的编写</h2><p>这样我们所有的配置文件都写好了，只需要修改DAO层了。在这里我们就不将所有配置的方法都实现了，例举个别的方法，程序里面会写上比较详细的注释。<br>程序里面包含了一个工具类：<a href="https://929050566.github.io/2018/12/07/MybatisSqlSessionFactory工具类/" target="_blank" rel="noopener">MybatisSqlSessionFactory</a>，在这里就不做详细讲解，它的作用就是得到SqlSession这个核心对象，以及关闭SqlSession。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line">public class StudentDAOImpl implements StudentDAO &#123;</span><br><span class="line"></span><br><span class="line">	private Logger log = Logger.getLogger(this.getClass());</span><br><span class="line">	private SqlSession ss;</span><br><span class="line"></span><br><span class="line">	public StudentDAOImpl() &#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public boolean insertStduent(Students s) &#123;</span><br><span class="line">		log.info(&quot;调用业务逻辑方法:insertStduent(Students s)&quot;);</span><br><span class="line">		boolean result = false;</span><br><span class="line">		SqlSession ss = MybatisSqlSessionFactory.getSqlSession();</span><br><span class="line">		try &#123;</span><br><span class="line">			int i = ss.insert(&quot;insertstudent&quot;, s);</span><br><span class="line">			if (i &gt; 0) &#123;</span><br><span class="line">				result = true;</span><br><span class="line">				log.info(&quot;添加学生信息成功&quot; + s);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			log.warn(&quot;添加学生信息失败：&quot; + e);</span><br><span class="line">		&#125; finally &#123;</span><br><span class="line">			if (ss != null)</span><br><span class="line">				ss.close();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return result;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public boolean deleteStudent(Integer studentid) &#123;</span><br><span class="line">		boolean result = false;</span><br><span class="line">		SqlSession ss = MybatisSqlSessionFactory.getSqlSession(false);</span><br><span class="line">		try &#123;</span><br><span class="line">			int i = ss.delete(&quot;deletestudent&quot;);</span><br><span class="line">			if (i &gt; 0) &#123;</span><br><span class="line">				ss.commit();</span><br><span class="line">				result = true;</span><br><span class="line">				log.info(&quot;学生信息删除成功！&quot;);</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				ss.rollback();</span><br><span class="line">				log.info(&quot;学生信息删除失败！&quot;);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			log.warn(&quot;学生信息删除失败：&quot; + e);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return result;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public boolean updateStudnet(Students s) &#123;</span><br><span class="line">		log.info(&quot;调用业务逻辑方法:updateStudnet(Students s)&quot;);</span><br><span class="line">		boolean result = false;</span><br><span class="line">		SqlSession ss = MybatisSqlSessionFactory.getSqlSession();</span><br><span class="line">		try &#123;</span><br><span class="line">			int i = ss.update(&quot;updatestudentdy&quot;, s);</span><br><span class="line">			if (i &gt; 0) &#123;</span><br><span class="line">				log.info(&quot;修改学生信息成功&quot; + s);</span><br><span class="line">				result = true;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			log.info(&quot;修改学生信息失败：&quot; + e);</span><br><span class="line">		&#125;</span><br><span class="line">		MybatisSqlSessionFactory.closeSqlSession();</span><br><span class="line">		return result;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public int insertStudents(List&lt;Students&gt; list) &#123;</span><br><span class="line">		log.info(&quot;调用业务逻辑方法:insertStduent(Students s)&quot;);</span><br><span class="line">		int i = 0;</span><br><span class="line">		SqlSession ss = MybatisSqlSessionFactory.getSqlSession(false);</span><br><span class="line">		try &#123;</span><br><span class="line">			i = ss.insert(&quot;insertstudents&quot;, list);</span><br><span class="line">			if (i == list.size()) &#123;</span><br><span class="line">				ss.commit();</span><br><span class="line">				log.info(&quot;添加学生信息成功&quot; + list);</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				ss.rollback();</span><br><span class="line">				log.info(&quot;添加学生信息失败，数据回滚！&quot;);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			log.warn(&quot;添加学生信息失败：&quot; + e);</span><br><span class="line">		&#125; finally &#123;</span><br><span class="line">			if (ss != null)</span><br><span class="line">				ss.close();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return i;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public int deleteStudents(List&lt;Integer&gt; list) &#123;</span><br><span class="line">		log.info(&quot;调用业务逻辑方法:deleteStudents(List&lt;Integer&gt; list)&quot;);</span><br><span class="line">		int result = 0;</span><br><span class="line">		SqlSession ss = MybatisSqlSessionFactory.getSqlSession(false);</span><br><span class="line">		try &#123;</span><br><span class="line">			int i = ss.delete(&quot;deletestudents&quot;, list);</span><br><span class="line">			if (i == list.size()) &#123;</span><br><span class="line">				ss.commit();</span><br><span class="line">				result = i;</span><br><span class="line">				log.info(i + &quot;行学生信息成功被删除！&quot;);</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				ss.rollback();</span><br><span class="line">				log.info(&quot;学生信息删除失败,数据回滚！&quot;);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			log.warn(&quot;学生信息删除失败：&quot; + e);</span><br><span class="line">		&#125;</span><br><span class="line">		MybatisSqlSessionFactory.closeSqlSession();</span><br><span class="line">		return result;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    
    

    <!--自定义-->
    <div>
      
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>
      
    </div>
    <!--自定义-->
    
    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/MyBatis/" rel="tag"># MyBatis</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/12/05/java基础/" rel="next" title="java基础">
                <i class="fa fa-chevron-left"></i> java基础
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/12/07/MybatisSqlSessionFactory工具类/" rel="prev" title="MybatisSqlSessionFactory工具类">
                MybatisSqlSessionFactory工具类 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="lv-container" data-id="city" data-uid="MTAyMC80MTUyMC8xODA2Nw"></div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar2.png" alt="张豪">
            
              <p class="site-author-name" itemprop="name">张豪</p>
              <p class="site-description motion-element" itemprop="description">纵有疾风起，人生不言弃。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#MyBatis是什么"><span class="nav-number">1.</span> <span class="nav-text">MyBatis是什么</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MyBatis什么时候使用"><span class="nav-number">2.</span> <span class="nav-text">MyBatis什么时候使用</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Mybatis如何使用"><span class="nav-number">3.</span> <span class="nav-text">Mybatis如何使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#导入jar包"><span class="nav-number">3.1.</span> <span class="nav-text">导入jar包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建数据库对象"><span class="nav-number">3.2.</span> <span class="nav-text">创建数据库对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#建立POJO"><span class="nav-number">3.3.</span> <span class="nav-text">建立POJO</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建映射文件"><span class="nav-number">3.4.</span> <span class="nav-text">创建映射文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#DML"><span class="nav-number">3.4.1.</span> <span class="nav-text">DML</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#动态SQL"><span class="nav-number">3.4.2.</span> <span class="nav-text">动态SQL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#批量处理"><span class="nav-number">3.4.3.</span> <span class="nav-text">批量处理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建配置文件"><span class="nav-number">3.5.</span> <span class="nav-text">创建配置文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#创建DB配置文件"><span class="nav-number">3.5.1.</span> <span class="nav-text">创建DB配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建mybatisconfig-xml"><span class="nav-number">3.5.2.</span> <span class="nav-text">创建mybatisconfig.xml</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DAO层的编写"><span class="nav-number">3.6.</span> <span class="nav-text">DAO层的编写</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">张豪</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">30.5k</span>
  
</div>

<!--

  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>




  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>

-->






<script>
(function(){
    var bp = document.createElement('script');
    bp.src = '//push.zhanzhang.baidu.com/push.js';
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  












  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("Ao8ulWHVQL8MoXaYC6Vdx83D-gzGzoHsz", "DOisvJRBttDNBED13TYDm3Gv");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  

  

  

</body>
</html>
